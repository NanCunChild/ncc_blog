<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Posts on NanCunChild的碎碎念</title>
        <link>http://localhost:1313/posts/</link>
        <description>Recent content in Posts on NanCunChild的碎碎念</description>
        <generator>NCC Modified Hugo</generator>
        <language>zh-CN</language>
        <lastBuildDate>Mon, 29 Dec 2025 01:27:58 +0800</lastBuildDate>
        <atom:link href="http://localhost:1313/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>缝缝补补又一年——CentOS更新OpenSSH小记</title>
            <link>http://localhost:1313/posts/patch_this_and_that/</link>
            <pubDate>Mon, 29 Dec 2025 01:27:58 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/patch_this_and_that/</guid>
            <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;
&lt;p&gt;NCC有一些很老的机器，老嵌入式设备和一些CentOS虚拟机，这次就遇到学校安装candence virtuoso软件的机器。原先是RHEL6，在NCC进行换源之后变成了CentOS6.5 。但是仍然有一个大麻烦，SSH版本太老，只支持DSS密钥，当现代终端连接时会出现如下提示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PS C:\Users\NanCunChild&amp;gt; ssh &lt;span style=&#34;color:#ae81ff&#34;&gt;192.168&lt;/span&gt;.114.246
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Unable to negotiate with &lt;span style=&#34;color:#ae81ff&#34;&gt;192.168&lt;/span&gt;.114.246 port &lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt; no matching host key type found. Their offer&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt; ssh-rsa,ssh-dss
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;先说解决方案，一次性使用的话直接输入：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ssh -o HostKeyAlgorithms=+ssh-dss -o PubkeyAcceptedKeyTypes=+ssh-dss xxx.xxx.xxx.xxx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果需要经常连接，可以在本机 &lt;code&gt;.ssh/config&lt;/code&gt; 中将其进行标记，这样以后都会允许DSS密钥：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Host {IP} HostKeyAlgorithms +ssh-dss PubkeyAcceptedKeyTypes +ssh-dss
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果是那些神神叨叨的网络安全研究人员，此时就会建议你直接升级OpenSSH，以支持最新的加密。但是这个也是最麻烦的，之后NCC给大家整活演示一下。&lt;/p&gt;
&lt;h2 id=&#34;ssh的历史&#34;&gt;SSH的历史&lt;/h2&gt;
&lt;h3 id=&#34;1-开天辟地嗅探器危机与-tatu-的反击-1995&#34;&gt;1. 开天辟地：嗅探器危机与 Tatu 的反击 (1995)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;背景：&lt;/strong&gt; 1995 年春，芬兰赫尔辛基理工大学（Helsinki University of Technology）。当时互联网是基于信任的，大家都用 &lt;strong&gt;rlogin&lt;/strong&gt; 和 &lt;strong&gt;Telnet&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;事件：&lt;/strong&gt; 研究员 &lt;strong&gt;Tatu Ylönen&lt;/strong&gt; 发现学校网络遭到大规模的密码嗅探攻击（Password Sniffing）。黑客潜伏在网络节点，截获明文传输的用户名和密码。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;诞生：&lt;/strong&gt; Tatu 没有坐以待毙，他在几个月内写出了 &lt;strong&gt;SSH-1&lt;/strong&gt;。它的核心逻辑很简单但革命性：&lt;strong&gt;先建立加密隧道，再在隧道里跑认证和数据。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;发布：&lt;/strong&gt; 1995 年 7 月，SSH-1 作为一个自由软件发布。到年底，它已经有了 20,000 个用户，迅速成为 Unix 系统的标配。&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<h2 id="背景">背景</h2>
<p>NCC有一些很老的机器，老嵌入式设备和一些CentOS虚拟机，这次就遇到学校安装candence virtuoso软件的机器。原先是RHEL6，在NCC进行换源之后变成了CentOS6.5 。但是仍然有一个大麻烦，SSH版本太老，只支持DSS密钥，当现代终端连接时会出现如下提示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>PS C:\Users\NanCunChild&gt; ssh <span style="color:#ae81ff">192.168</span>.114.246
</span></span><span style="display:flex;"><span>Unable to negotiate with <span style="color:#ae81ff">192.168</span>.114.246 port <span style="color:#ae81ff">22</span><span style="color:#960050;background-color:#1e0010">:</span> no matching host key type found. Their offer<span style="color:#960050;background-color:#1e0010">:</span> ssh-rsa,ssh-dss
</span></span></code></pre></div><p>先说解决方案，一次性使用的话直接输入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>ssh -o HostKeyAlgorithms=+ssh-dss -o PubkeyAcceptedKeyTypes=+ssh-dss xxx.xxx.xxx.xxx
</span></span></code></pre></div><p>如果需要经常连接，可以在本机 <code>.ssh/config</code> 中将其进行标记，这样以后都会允许DSS密钥：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Host {IP} HostKeyAlgorithms +ssh-dss PubkeyAcceptedKeyTypes +ssh-dss
</span></span></code></pre></div><p>如果是那些神神叨叨的网络安全研究人员，此时就会建议你直接升级OpenSSH，以支持最新的加密。但是这个也是最麻烦的，之后NCC给大家整活演示一下。</p>
<h2 id="ssh的历史">SSH的历史</h2>
<h3 id="1-开天辟地嗅探器危机与-tatu-的反击-1995">1. 开天辟地：嗅探器危机与 Tatu 的反击 (1995)</h3>
<ul>
<li>
<p><strong>背景：</strong> 1995 年春，芬兰赫尔辛基理工大学（Helsinki University of Technology）。当时互联网是基于信任的，大家都用 <strong>rlogin</strong> 和 <strong>Telnet</strong>。</p>
</li>
<li>
<p><strong>事件：</strong> 研究员 <strong>Tatu Ylönen</strong> 发现学校网络遭到大规模的密码嗅探攻击（Password Sniffing）。黑客潜伏在网络节点，截获明文传输的用户名和密码。</p>
</li>
<li>
<p><strong>诞生：</strong> Tatu 没有坐以待毙，他在几个月内写出了 <strong>SSH-1</strong>。它的核心逻辑很简单但革命性：<strong>先建立加密隧道，再在隧道里跑认证和数据。</strong></p>
</li>
<li>
<p><strong>发布：</strong> 1995 年 7 月，SSH-1 作为一个自由软件发布。到年底，它已经有了 20,000 个用户，迅速成为 Unix 系统的标配。</p>
</li>
</ul>
<h3 id="2-分裂与商业化自由软件的困境">2. 分裂与商业化：自由软件的困境</h3>
<ul>
<li>
<p>Tatu 随后成立了 <em>SSH Communications Security</em> 公司，随着 SSH 的普及，后续版本的许可证变得越来越严格，并逐渐走向商业闭源。</p>
</li>
<li>
<p>这导致开源社区无法继续自由使用 SSH 的最新版本。此时，SSH 分裂为“商业版”和“最后留存的自由版”。</p>
</li>
</ul>
<h3 id="3-救世主-openbsdopenssh-的诞生-1999">3. 救世主 OpenBSD：OpenSSH 的诞生 (1999)</h3>
<p>这是 OpenSSH 真正统治世界的关键转折点。现在仍然能看到一个特别丑的黄色大河豚web网页可以下载OpenSSH，这就是OpenBSD整的版本。</p>
<ul>
<li>
<p><strong>Björn Grönvall</strong> 基于 SSH 1.2.12（最后一个真正自由的版本）维护了一个叫 <strong>OSSH</strong> 的分支。</p>
</li>
<li>
<p><strong>OpenBSD 的介入：</strong> 以“代码洁癖”和“安全至上”著称的 OpenBSD 团队（由 Theo de Raadt 领导）注意到了 OSSH。他们决定 fork 这个项目，并进行了彻底的代码审计。</p>
</li>
<li>
<p><strong>大清洗：</strong> OpenBSD 开发者移除了所有不必要的代码、修复了潜在的缓冲区溢出漏洞，并将其重新命名为 <strong>OpenSSH</strong>。</p>
</li>
<li>
<p><strong>结果：</strong> 1999 年 12 月，随 OpenBSD 2.6 发布的 OpenSSH 迅速被移植到 Linux（Red Hat, Debian 等）。因为它<strong>完全免费、代码极其干净、且没有专利纠纷</strong>，它迅速击败了商业版 SSH，成为了事实上的全球标准。</p>
</li>
</ul>
<h2 id="dss的不安全性">DSS的不安全性</h2>
<h3 id="1-算力维度的直观解释1024-位的纸老虎">1. 算力维度的直观解释：1024 位的纸老虎</h3>
<p>DSS（Digital Signature Standard）在 FIPS 186-2 标准中被强制限制密钥长度为 <strong>1024 位</strong> (L=1024, N=160)。</p>
<ul>
<li>
<p><strong>技术原理：</strong> DSA 的安全性基于<strong>离散对数问题 (Discrete Logarithm Problem, DLP)</strong>。</p>
</li>
<li>
<p><strong>算力对比（直观例子）：</strong></p>
<ul>
<li>
<p><strong>1998年：</strong> 破解 1024 位可能需要举全球算力耗时几十年。</p>
</li>
<li>
<p><strong>2015年（Logjam 攻击）：</strong> 研究表明，国家级攻击者（如 NSA）有能力预先计算出常用 1024 位素数的“查找表”。一旦表建好，破解一个个体连接只需几分钟。</p>
</li>
<li>
<p><strong>2025年：</strong> 随着云计算和专用硬件（FPGA/ASIC）的发展，1024 位 DLP 的破解难度对于拥有超级计算机的组织来说，就像是<strong>用推土机撞烂木门</strong>一样简单。</p>
</li>
</ul>
</li>
<li>
<p><strong>结论：</strong> 1024 位的锁在今天就是“防君子不防小人”。而 DSA 协议设计导致它<strong>无法</strong>简单地增加密钥长度到 2048 位以上（虽然 FIPS 186-3 后来允许了，但 OpenSSH 的 <code>ssh-dss</code> 实现一直停留在 1024 位以保持兼容性，直到被废弃）。</p>
</li>
</ul>
<h3 id="2-致命的随机数缺陷-the-nonce-failure">2. 致命的随机数缺陷 (The Nonce Failure)</h3>
<p>这是 DSA 真正的死穴，也是它比 RSA 脆弱得多的原因。</p>
<ul>
<li>
<p><strong>原理：</strong> DSA 在签名时需要生成一个随机数 $k$（Nonce）。</p>
</li>
<li>
<p>公式（数学展示）：</p>
<p>签名过程涉及计算 $s = k^{-1}(H(m) + x \cdot r) \mod q$。</p>
<p>这里 $x$ 是你的私钥。</p>
</li>
<li>
<p>灾难场景：</p>
<p>如果你的服务器或电脑的随机数生成器（RNG）不好（比如嵌入式设备熵不足），导致你在两次不同的签名中使用了相同的 $k$。</p>
<p>攻击者拿到这两个签名 $(r, s_1)$ 和 $(r, s_2)$，只需要做小学级别的代数运算，就能直接计算出你的私钥 $x$。</p>
</li>
<li>
<p><strong>案例：</strong> 著名的 <strong>索尼 PS3 破解事件</strong> 就是因为索尼的 ECDSA 实现中，$k$ 是个常数……导致私钥直接被黑客算出来了。RSA 对随机数就没有这么敏感，随机数差一点只是容易被猜，而不是直接暴露私钥。</p>
</li>
</ul>
<h2 id="救火与预防">救火与预防</h2>
<p>CentOS 6 默认的 OpenSSH 版本很老（比如 5.3），不支持 Ed25519，甚至不支持很多现代加密套件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>nancunchild@work-eda ~<span style="color:#f92672">]</span>$ ssh -version
</span></span><span style="display:flex;"><span>OpenSSH_5.3p1, OpenSSL 1.0.1e-fips <span style="color:#ae81ff">11</span> Feb <span style="color:#ae81ff">2013</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>nancunchild@work-eda ~<span style="color:#f92672">]</span>$ ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>unknown key type ed25519
</span></span></code></pre></div><p><strong>核心问题：</strong> <code>yum update</code> 已经没用了（vault都没人管了），且系统自带的 OpenSSL 都是太古版本，而新版 OpenSSH 需要新版 OpenSSL。</p>
<p>只能 <strong>旁路编译安装</strong> 来解决问题了。这一步可以自己做一个docker容器跑系统环境进行编译，也可以直接大胆动手在生产机上面编译。docker好处是好管理没有奇奇怪怪的依赖，直接上手的好处是好测试，跑通了就能用了。</p>
<h2 id="旧瓶装新酒">旧瓶装新酒</h2>
<blockquote>
<p>写在动手之前
记得一定、一定要有备用连接方式！我们接下来做的一切都是在修改SSH本身，这是站在桥上换桥板的工作！请务必使用任何可能的备用方式作为SSH弄坏时的兜底，VNC，Telnet等都可以！NCC是因为能直接连上PVE的web终端，而且做好了快照所以直接动手了。请参照者一定三思！</p>
</blockquote>
<p>网安工程师们站着说话不腰疼，给这个CentOS6更新软件谈何容易。这玩意官方都没在维护了，vault规范在这些年间都更换过标准和URL，这次真得技术考古。</p>
<p>首先我们确定目标，需要在这个机器上编译安装一个SSHD，那么我们就需要对应的glibc，而且在编译它之前我们还需要编译新的OpenSSL来支持加密算法，不然SSHD没有依赖。</p>
<p>那还说啥，整呗（NCC全程使用root账户操作，不要这样学NCC ）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 先编译新的OpenSSL</span>
</span></span><span style="display:flex;"><span>cd /usr/local/src 
</span></span><span style="display:flex;"><span>wget https://www.openssl.org/source/openssl-1.1.1w.tar.gz 
</span></span><span style="display:flex;"><span>tar -xzvf openssl-1.1.1w.tar.gz 
</span></span><span style="display:flex;"><span>cd openssl-1.1.1w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>./config --prefix<span style="color:#f92672">=</span>/opt/ssh-upgrade/openssl --openssldir<span style="color:#f92672">=</span>/opt/ssh-upgrade/openssl shared zlib 
</span></span><span style="display:flex;"><span>make 
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 再来OpenSSH</span>
</span></span><span style="display:flex;"><span>wget https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.8p1.tar.gz 
</span></span><span style="display:flex;"><span>tar -xzvf openssh-9.8p1.tar.gz
</span></span><span style="display:flex;"><span>cd openssh-9.8p1
</span></span><span style="display:flex;"><span>./configure <span style="color:#ae81ff">\ </span>--prefix<span style="color:#f92672">=</span>/usr/local/openssh <span style="color:#ae81ff">\ </span>--sysconfdir<span style="color:#f92672">=</span>/etc/ssh <span style="color:#ae81ff">\ </span>--with-ssl-dir<span style="color:#f92672">=</span>/usr/local/ssl-new <span style="color:#ae81ff">\ </span>--with-zlib <span style="color:#ae81ff">\ </span>--with-pam <span style="color:#ae81ff">\ </span>--with-md5-passwords <span style="color:#ae81ff">\ </span>LDFLAGS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-L/usr/local/ssl-new/lib -Wl,-rpath=/usr/local/ssl-new/lib&#34;</span>
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>make install
</span></span></code></pre></div><p>其中居然只出现了一次路径报错和一次小依赖报错，然后make就这样成了，第一次如此顺利的编译哇！马上来试试：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/usr/local/openssh/bin/ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><p>此时会显示密钥的指纹信息，没有其它报错就说明成了。
但是！很重要的一点！我们目前只是编译好了这个软件，系统并没有默认来使用它，我们接下来开始换掉承重柱，编辑 <code>/etc/init.d/sshd</code> ，里面会有SSHD和KEYGEN两个变量，把它们都改为新路径，这里是 <code>/usr/local/openssh/sbin/sshd</code> 和 <code>/usr/local/openssh/bin/ssh-keygen</code> 。还有很多旧字段，NCC在这里简单列举一下：</p>
<p>注释掉：
RSAAuthentication
GSSAPIAuthentication
GSSAPICleanupCredentials
HostKey /etc/ssh/ssh_host_key
HostKey /etc/ssh/ssh_host_dsa_key</p>
<p>添加：
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ed25519_key</p>
<p>修改完成之后运行 <code>/usr/local/openssh/sbin/sshd -t</code> ，没有报错就成功啦！直接大胆 <code>service sshd restart</code> 就好啦！
NCC终端显示如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@work-eda openssh-9.8p1<span style="color:#f92672">]</span><span style="color:#75715e"># /usr/local/openssh/sbin/sshd -t</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@work-eda openssh-9.8p1<span style="color:#f92672">]</span><span style="color:#75715e"># service sshd restart</span>
</span></span><span style="display:flex;"><span>Stopping sshd:                                             <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Starting sshd:                                             <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
</span></span></code></pre></div><p>其实NCC还是想把它替代老的OpenSSL和OpenSSH的，只是担心原本yum管理的包手动去修改了可能造成问题。正规做法其实也是将它们都打包为rpm包，然后使用yum管理安装，直接改动将士yum数据库中软件不匹配。但是既然CentOS6已经死了，暴力操作也没什么问题：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mv /usr/bin/ssh /usr/bin/ssh.old 
</span></span><span style="display:flex;"><span>mv /usr/sbin/sshd /usr/sbin/sshd.old 
</span></span><span style="display:flex;"><span>mv /usr/bin/ssh-keygen /usr/bin/ssh-keygen.old
</span></span><span style="display:flex;"><span>mv /usr/bin/scp /usr/bin/scp.old 
</span></span><span style="display:flex;"><span>mv /usr/bin/sftp /usr/bin/sftp.old
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ln -s /usr/local/openssh/bin/ssh /usr/bin/ssh
</span></span><span style="display:flex;"><span>ln -s /usr/local/openssh/sbin/sshd /usr/sbin/sshd
</span></span><span style="display:flex;"><span>ln -s /usr/local/openssh/bin/ssh-keygen /usr/bin/ssh-keygen
</span></span><span style="display:flex;"><span>ln -s /usr/local/openssh/bin/scp /usr/bin/scp
</span></span><span style="display:flex;"><span>ln -s /usr/local/openssh/bin/sftp /usr/bin/sftp
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 移动前</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>nancunchild@work-eda ~<span style="color:#f92672">]</span>$ ssh -V
</span></span><span style="display:flex;"><span>OpenSSH_5.3p1, OpenSSL 1.0.1e-fips <span style="color:#ae81ff">11</span> Feb <span style="color:#ae81ff">2013</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 移动并创建软链接后</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>nancunchild@work-eda ~<span style="color:#f92672">]</span>$ ssh -V
</span></span><span style="display:flex;"><span>OpenSSH_9.8p1, OpenSSL 1.1.1w  <span style="color:#ae81ff">11</span> Sep <span style="color:#ae81ff">2023</span>
</span></span></code></pre></div><p>在这里NCC能找到的也就只有 <code>OpenSSL 1.1.1w</code> 了，虽然已经出到了3.6.0，但是新版本重构太大没法在不改CentOS其它依赖的情况下跑起来。这次就算弄完啦，重启服务，再拍个快照就完成啦！</p>
<p>本文历史讲解和算法简介部分使用Gemini3.0Pro-Preview完成，感谢哈基米帮忙！感谢Google赞助！</p>
]]>
			</content:encoded>
        </item>
        
        <item>
            <title>异梦杂谈（五）大航海</title>
            <link>http://localhost:1313/posts/strange_dream_age_of_discovery/</link>
            <pubDate>Mon, 08 Dec 2025 23:16:10 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/strange_dream_age_of_discovery/</guid>
            <description>&lt;p&gt;1491年，西班牙圣塔菲城内。&lt;/p&gt;
&lt;p&gt;圣塔菲的石墙将格拉纳达的酷暑隔绝在外，但是战争的焦躁透过墙壁弥漫进来。我站在这座为围城而生的堡垒里，胸口佩戴的家族徽章在故乡或许还有些分量，但在这里它的分量能轻易被那些世代公爵们审视的目光所动摇。自己像一颗被命运大手投到残局棋盘上的士兵，在众多的大棋子中无足轻重。他们是这片土地的主人，而我，只是一个等待他们施舍机会的，如同卑微鬣狗一般的航海家。&lt;/p&gt;
&lt;p&gt;外面正在进行的，是一场持续了百年的圣战，​在座的每一个西班牙贵族，血管里都流淌着与异教徒战斗了数百年的记忆。如今终点就在眼前。我顺着他们谈话时无意识瞥向窗外的目光望去，在那片被战火炙烤得尘土飞扬的大地上，异教徒聚居的阿罕布拉宫的轮廓如同一座精致易碎的梦。胜利在望的狂热和国库见底的阴霾，像两种互不相容的颜料，晕染在每一位贵族的脸上。他们高声谈论着上帝的荣光和格拉纳达苏丹的投降，仿佛这样就能盖过自己钱袋干瘪的回响。&lt;/p&gt;
&lt;p&gt;​财政大臣，这一位德高望重的公爵在小声和主教汇报之后沉思了一会，他那张饱经风霜的脸比圣塔菲的石墙还要坚硬。随后用指关节敲了敲木桌，整个大堂内的声音马上沉寂下来。沉声打断了众人对战利品的幻想：“陛下，靠着银行家的新贷款，士兵们这个星期的面包是有了。但骑士们的马料已经减半，下一次炮火齐射的钱，我们还没凑齐。这样打下去，我们是在和异教徒比谁的粮仓先空！”整个大厅的狂热被这番冰冷现实的报告降下了温度。所有人的目光有意无意地开始向我，以及另一位来自东方的“智者”这边瞟来。这个时候，他们希望我这群卑微的航海家给出一个能变出黄金的奇迹。我一直主张的向西探索也只有在此时才可能被偶尔提及。&lt;/p&gt;
&lt;p&gt;这时候我才将注意力放在身边突然出现的一位东方智者身上，这位东方人身穿裁切得像本地服装的丝绸长袍，手腕上带着几条大大的木珠手串，留着东方人特有的山羊胡，他将稀疏的头发在头顶挽成一个奇怪的发髻，用一根木簪固定，看上去既不像教士，也不像我们认识的任何一种异教徒。&lt;/p&gt;
&lt;p&gt;公爵目光转向那位“智者”，目光经过我时甚至没有停顿一下。“郑大师，您作为东方大明帝国御船航海师郑和的养子，而且曾在西部经商，应该没有人更适合说明航海和贸易的要诀了。”。这一番话语，让众多贵族都向这个东方人投来惊奇的目光。郑和的名声他们多少有听说，而大明远航的奇迹早已遍布四海。&lt;/p&gt;
&lt;p&gt;郑大师缓慢而沉稳地开口：“我们大明有句古话叫‘夸父逐日，终渴死于道左；守株待兔，尚可充一餐之饥。’，意思就是呢，不可去追那些虚无缥缈的东西。。。”。他一说出这段话，周围的贵族们便意味深长地点点头，有些不时用轻蔑的眼光看着我，让大师表示这个立场才是贵族们想要的，只需要一个权威的人能看似有理地反对我提出西向探索这个未知风险的主意，这已经使得后续的论据不再重要了。&lt;/p&gt;
&lt;p&gt;一番“天命论”说罢，郑大师一手慢慢捻着他的山羊胡，比划着地图上的航线，黑色的眼里有着市侩般精明的光芒。如同参透了一个宇宙奥秘一般地神秘地轻声说道：“诸位大人，葡萄牙人使用六十年，死去无数优秀水手开辟出来的非洲路线，就是最好的宝藏。他们仍然绕过好望角去当盲人，而我们将是跟随着拾取随处都是的金币的明眼人。”&lt;/p&gt;
&lt;p&gt;大厅里响起了一片心照不宣的低笑声，那是心照不宣的、属于聪明人的笑声。那种沉重的、关于国运和未来的压抑感消失了，被一种自作聪明的膨胀感代替。&lt;/p&gt;
&lt;p&gt;“您是说，照搬他们的航线？”有年轻的男爵从贵族中间探出身子，不确定地询问。&lt;/p&gt;
&lt;p&gt;“不然”，郑大师微笑着，语气中带着一丝傲慢和作态。“是‘借鉴’一下他们的智慧。这些智慧是上帝赏赐给全人类的。”，大师搬出上帝时，那男爵也不由得打消疑虑，慢慢点点头。其它贵族们也纷纷低声附和。&lt;/p&gt;
&lt;p&gt;“既然航线已经确定，港口已经建成，我们只需派出灵活的小船，避开他们的主力，在他们还要继续向南、向东探索未知海域时，我们就在他们已知安全的后方港口里，用比他们低一成的价格收购象牙和黄金。未知海域的风险他们担，已知港口的利润我们拿。这也是我家乡大明的智慧，叫做‘借鸡生蛋’。。。”&lt;/p&gt;
&lt;p&gt;在这滔滔不绝的大明智慧的灌输中，我还想再说些什么来为我持续努力游说了多年的西行计划辩护时，但是公爵用严厉的目光打断了我。&lt;/p&gt;
&lt;p&gt;直到郑大师说完，大厅里面满是低沉的赞同声和对未来不再迷茫的笑声之后，公爵傲然评论道：“这就是成熟稳重的建议，郑大师的远见令人钦佩，远超某些。。。目光短浅不合时宜之辈。”，有意无意地停顿让我满脸通红，“我们帝国需要的是确定的黄金，而不是重洋之外的飘渺传说。这一点我相信大家没有异议了，接下来我们来详细说说航行细节吧。”。&lt;/p&gt;
&lt;p&gt;此时我才想起来，在这个充满着膨胀的傲慢和自大的宫殿中，我的分量像是一根羽毛，而真正拥有大权，希望复用航线的贵族们才是实打实的铅秤。&lt;/p&gt;
&lt;p&gt;是呀，这个方案太完美了。在贵族们看来，这不需要巨额的前期投入，不需要承担探索未知的政治风险，不仅能快速见到回头钱，万一出了事，还可以说是底下商人的个人行为。&lt;/p&gt;
&lt;p&gt;“年轻人”，公爵像施舍一般给我一点对话的机会看着我。“你太年轻了，国家现在需要什么，你之后要多问问自己。”&lt;/p&gt;
&lt;p&gt;我诺诺答应着，却不相信葡萄牙人是傻子。但是在众多人的眼光中也有些动摇，目前的现状确实似乎应该以赚钱为核心目的，探险真的是对的吗？想起贵族们的质疑，我也有些迷茫。&lt;/p&gt;
&lt;p&gt;。。。&lt;/p&gt;
&lt;p&gt;果然，一年过去，整个圣塔菲都沉浸在一种名为“追随”的甜蜜毒药中。&lt;/p&gt;
&lt;p&gt;只需要跟在挂着葡萄牙旗帜的船队后面，在他们补给过的港口停泊，用比他们高一点点的价格扫货各种香料，用低一点点的价格出货各种毛毯和火枪，就能把满船的黄金运回国内。根本不需要那种懂得看星象的领航员，现在的西班牙的船长只需要学会一种技能——&lt;strong&gt;看葡萄牙人的桅杆&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;皇家造船厂里，原本用来阴干做龙骨的橡木，被拉去宫廷做了新的舞池地板；原本最好的风帆布，被用于贵妇们的遮阳棚，因为“既然不需要横渡大洋，就不需要那么结实的龙骨与风帆”公爵如是说道。老船匠们被解雇了，取而代之的是一群精通漆艺的画师，画师们把旧的近海渔船拖上岸，刷上鲜艳的油漆，挂上最华丽的西班牙皇室徽章，再给船头雕刻一个巨大的狮子——尽管这狮子的木头里已经被虫蛀空了。&lt;/p&gt;
&lt;p&gt;“这就是弯道超车。”公爵在一次酒后曾这样得意地对我说，“不用承担风暴的风险，却能享受风暴后的宁静。”，满是醉意的眼神投向旁边的郑大师。我被淹没在夜夜笙歌的圣塔菲，看着窗外有着坚实围墙的异教徒城格拉纳达正在被西班牙军队缓慢推平。使用大炮确实能打开格拉纳达的石墙，但是我们在拆除格拉纳达的城墙的同时，却在自己心里砌起了一道更高的墙，就像圣塔菲的城墙一样，这堵墙内，不需要思考和冒险，只需要跟随。&lt;/p&gt;
&lt;p&gt;终于有一天，葡萄牙国王若昂二世的特使带着满腔怒火站在了伊莎贝拉女王面前。&lt;/p&gt;
&lt;p&gt;我永远忘不了那天的场景。特使将一卷羊皮纸——那是我们早就签署过的《阿尔卡索瓦什条约》——重重地摔在桌上，咆哮着说我们的行为是“卑劣的小偷行径”。他们不仅扣押了我们所有的走私船，还威胁要彻底切断我们进入亚速尔群岛以南的所有航路。如果不想开战，就必须拿出一个一个天文数字的赔偿表示歉意。&lt;/p&gt;
&lt;p&gt;那笔赔偿金，不仅吐光了这两年郑大师的“借鸡生蛋”计划的所有利润，还让国库背上了比格拉纳达战役时更沉重的赤字。&lt;/p&gt;
&lt;p&gt;依然是那个大厅，但气氛比两年前更加令人窒息。郑大师闭门不出，推脱身体不好，他家乡的智慧肯定告诉了他此时应该“远离是非之地”。公爵看起来老了十岁，他再也无法用那种审视的目光看我，而是带着一种走投无路的赌徒神情。&lt;/p&gt;
&lt;p&gt;“年轻人……你说的那个向西的计划，”公爵的声音沙哑，“还需要多少钱？”&lt;/p&gt;
&lt;p&gt;我心中泛起一阵悲凉的快意，这快感与无奈交织，最终合成的是如同深烘焙咖啡一般的苦涩。“回报公爵大人，如果您一年前问我，那我会迅速准备好三艘全新的卡拉威尔帆船，外加八十名精锐水手。”&lt;/p&gt;
&lt;p&gt;我停顿了一下，环视着这些面如死灰的贵族们，残酷地揭开了他们无法说出的话：“但现在？我们没钱造新船了，没有时间，没有工匠，没有水手。葡萄牙人封锁了南下的路，我们只能向西。我们当年为了省钱而没有去造的那些能跨越大洋的巨舰，当年形成的赚取已知航道的思维模式，现在成了我们脖子上的绞索。”&lt;/p&gt;
&lt;p&gt;“我只能给你们三艘船，”公爵咬着牙，每一个词都是是从自己身上割肉，“圣玛利亚号，还有平塔号和尼尼亚号。这是我们能凑出来的极限了。其它的贸易船都被葡萄牙人扣押了。”&lt;/p&gt;
&lt;p&gt;我差点笑出声来。那三艘船？圣玛利亚号是个笨重的货船，又慢又迟钝；另外两艘小得就像大一点的渔船。这就是他们让我去征服未知大洋的全部家当。当有选择时拥抱所谓的借鉴道路，依靠后发和窃取的那点优势。而当被发现时，却想起自己的主心骨一直都是葡萄牙人给的。只能在软弱的烂泥中寻求各种奇迹。&lt;/p&gt;
&lt;p&gt;我说不出这些话，最终的情绪只能汇成一句心灰意冷的回应&lt;/p&gt;
&lt;p&gt;“是，愿上帝保佑我们”&lt;/p&gt;
&lt;p&gt;我踏上了那艘名为“圣玛利亚”的笨重货船。它吱呀作响，像个患了关节炎的老人。手里拿着的是一张过期的、那是根据葡萄牙人二十年前的认知绘制的旧海图，我甚至没有一个精确的罗盘。船没入黑暗的瞬间，我回头望去。圣塔菲的城墙依旧耸立。我们攻破了格拉纳达，却把自己锁死在了另一座更坚固的围城里。那座城里没有星辰大海，只有精明的算计和无尽的跟随。&lt;/p&gt;
&lt;p&gt;NCC一下惊醒，上午还有一个教授的论文讲解讲座。赶过去参加时，教授正在使用着科技风的PPT大讲人工智能。“同学们，不要去想怎么从头训练一个基座模型，那是OpenAI和Google的事，那是烧钱的无底洞，是‘未知的风险’，这绝对拿不到科研资金的。”，教授停顿一下，推推眼镜。“我们要做的是&lt;strong&gt;应用层创新&lt;/strong&gt;，是&lt;strong&gt;Prompt Engineering&lt;/strong&gt;。只要调用他们的API，加上我们自己的UI，我们就能以最低的成本，实现……弯道超车。”。&lt;/p&gt;
&lt;p&gt;教室里爆发出快活的笑声，那是心照不宣的、属于聪明人的笑声。&lt;/p&gt;
&lt;p&gt;同学们认真做着笔记，同时导员发在群里的“人工智能快论文思维导图”被百次下载。&lt;/p&gt;
&lt;p&gt;NCC听着似曾相识的话，看着好似发生在过去的事，思绪却在大西洋上越走越远。远处只留下郑大师和那座圣塔菲的围城，以及一直被困在围城里，等着别人为他们去开辟新航线的贵族们。&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<p>1491年，西班牙圣塔菲城内。</p>
<p>圣塔菲的石墙将格拉纳达的酷暑隔绝在外，但是战争的焦躁透过墙壁弥漫进来。我站在这座为围城而生的堡垒里，胸口佩戴的家族徽章在故乡或许还有些分量，但在这里它的分量能轻易被那些世代公爵们审视的目光所动摇。自己像一颗被命运大手投到残局棋盘上的士兵，在众多的大棋子中无足轻重。他们是这片土地的主人，而我，只是一个等待他们施舍机会的，如同卑微鬣狗一般的航海家。</p>
<p>外面正在进行的，是一场持续了百年的圣战，​在座的每一个西班牙贵族，血管里都流淌着与异教徒战斗了数百年的记忆。如今终点就在眼前。我顺着他们谈话时无意识瞥向窗外的目光望去，在那片被战火炙烤得尘土飞扬的大地上，异教徒聚居的阿罕布拉宫的轮廓如同一座精致易碎的梦。胜利在望的狂热和国库见底的阴霾，像两种互不相容的颜料，晕染在每一位贵族的脸上。他们高声谈论着上帝的荣光和格拉纳达苏丹的投降，仿佛这样就能盖过自己钱袋干瘪的回响。</p>
<p>​财政大臣，这一位德高望重的公爵在小声和主教汇报之后沉思了一会，他那张饱经风霜的脸比圣塔菲的石墙还要坚硬。随后用指关节敲了敲木桌，整个大堂内的声音马上沉寂下来。沉声打断了众人对战利品的幻想：“陛下，靠着银行家的新贷款，士兵们这个星期的面包是有了。但骑士们的马料已经减半，下一次炮火齐射的钱，我们还没凑齐。这样打下去，我们是在和异教徒比谁的粮仓先空！”整个大厅的狂热被这番冰冷现实的报告降下了温度。所有人的目光有意无意地开始向我，以及另一位来自东方的“智者”这边瞟来。这个时候，他们希望我这群卑微的航海家给出一个能变出黄金的奇迹。我一直主张的向西探索也只有在此时才可能被偶尔提及。</p>
<p>这时候我才将注意力放在身边突然出现的一位东方智者身上，这位东方人身穿裁切得像本地服装的丝绸长袍，手腕上带着几条大大的木珠手串，留着东方人特有的山羊胡，他将稀疏的头发在头顶挽成一个奇怪的发髻，用一根木簪固定，看上去既不像教士，也不像我们认识的任何一种异教徒。</p>
<p>公爵目光转向那位“智者”，目光经过我时甚至没有停顿一下。“郑大师，您作为东方大明帝国御船航海师郑和的养子，而且曾在西部经商，应该没有人更适合说明航海和贸易的要诀了。”。这一番话语，让众多贵族都向这个东方人投来惊奇的目光。郑和的名声他们多少有听说，而大明远航的奇迹早已遍布四海。</p>
<p>郑大师缓慢而沉稳地开口：“我们大明有句古话叫‘夸父逐日，终渴死于道左；守株待兔，尚可充一餐之饥。’，意思就是呢，不可去追那些虚无缥缈的东西。。。”。他一说出这段话，周围的贵族们便意味深长地点点头，有些不时用轻蔑的眼光看着我，让大师表示这个立场才是贵族们想要的，只需要一个权威的人能看似有理地反对我提出西向探索这个未知风险的主意，这已经使得后续的论据不再重要了。</p>
<p>一番“天命论”说罢，郑大师一手慢慢捻着他的山羊胡，比划着地图上的航线，黑色的眼里有着市侩般精明的光芒。如同参透了一个宇宙奥秘一般地神秘地轻声说道：“诸位大人，葡萄牙人使用六十年，死去无数优秀水手开辟出来的非洲路线，就是最好的宝藏。他们仍然绕过好望角去当盲人，而我们将是跟随着拾取随处都是的金币的明眼人。”</p>
<p>大厅里响起了一片心照不宣的低笑声，那是心照不宣的、属于聪明人的笑声。那种沉重的、关于国运和未来的压抑感消失了，被一种自作聪明的膨胀感代替。</p>
<p>“您是说，照搬他们的航线？”有年轻的男爵从贵族中间探出身子，不确定地询问。</p>
<p>“不然”，郑大师微笑着，语气中带着一丝傲慢和作态。“是‘借鉴’一下他们的智慧。这些智慧是上帝赏赐给全人类的。”，大师搬出上帝时，那男爵也不由得打消疑虑，慢慢点点头。其它贵族们也纷纷低声附和。</p>
<p>“既然航线已经确定，港口已经建成，我们只需派出灵活的小船，避开他们的主力，在他们还要继续向南、向东探索未知海域时，我们就在他们已知安全的后方港口里，用比他们低一成的价格收购象牙和黄金。未知海域的风险他们担，已知港口的利润我们拿。这也是我家乡大明的智慧，叫做‘借鸡生蛋’。。。”</p>
<p>在这滔滔不绝的大明智慧的灌输中，我还想再说些什么来为我持续努力游说了多年的西行计划辩护时，但是公爵用严厉的目光打断了我。</p>
<p>直到郑大师说完，大厅里面满是低沉的赞同声和对未来不再迷茫的笑声之后，公爵傲然评论道：“这就是成熟稳重的建议，郑大师的远见令人钦佩，远超某些。。。目光短浅不合时宜之辈。”，有意无意地停顿让我满脸通红，“我们帝国需要的是确定的黄金，而不是重洋之外的飘渺传说。这一点我相信大家没有异议了，接下来我们来详细说说航行细节吧。”。</p>
<p>此时我才想起来，在这个充满着膨胀的傲慢和自大的宫殿中，我的分量像是一根羽毛，而真正拥有大权，希望复用航线的贵族们才是实打实的铅秤。</p>
<p>是呀，这个方案太完美了。在贵族们看来，这不需要巨额的前期投入，不需要承担探索未知的政治风险，不仅能快速见到回头钱，万一出了事，还可以说是底下商人的个人行为。</p>
<p>“年轻人”，公爵像施舍一般给我一点对话的机会看着我。“你太年轻了，国家现在需要什么，你之后要多问问自己。”</p>
<p>我诺诺答应着，却不相信葡萄牙人是傻子。但是在众多人的眼光中也有些动摇，目前的现状确实似乎应该以赚钱为核心目的，探险真的是对的吗？想起贵族们的质疑，我也有些迷茫。</p>
<p>。。。</p>
<p>果然，一年过去，整个圣塔菲都沉浸在一种名为“追随”的甜蜜毒药中。</p>
<p>只需要跟在挂着葡萄牙旗帜的船队后面，在他们补给过的港口停泊，用比他们高一点点的价格扫货各种香料，用低一点点的价格出货各种毛毯和火枪，就能把满船的黄金运回国内。根本不需要那种懂得看星象的领航员，现在的西班牙的船长只需要学会一种技能——<strong>看葡萄牙人的桅杆</strong>。</p>
<p>皇家造船厂里，原本用来阴干做龙骨的橡木，被拉去宫廷做了新的舞池地板；原本最好的风帆布，被用于贵妇们的遮阳棚，因为“既然不需要横渡大洋，就不需要那么结实的龙骨与风帆”公爵如是说道。老船匠们被解雇了，取而代之的是一群精通漆艺的画师，画师们把旧的近海渔船拖上岸，刷上鲜艳的油漆，挂上最华丽的西班牙皇室徽章，再给船头雕刻一个巨大的狮子——尽管这狮子的木头里已经被虫蛀空了。</p>
<p>“这就是弯道超车。”公爵在一次酒后曾这样得意地对我说，“不用承担风暴的风险，却能享受风暴后的宁静。”，满是醉意的眼神投向旁边的郑大师。我被淹没在夜夜笙歌的圣塔菲，看着窗外有着坚实围墙的异教徒城格拉纳达正在被西班牙军队缓慢推平。使用大炮确实能打开格拉纳达的石墙，但是我们在拆除格拉纳达的城墙的同时，却在自己心里砌起了一道更高的墙，就像圣塔菲的城墙一样，这堵墙内，不需要思考和冒险，只需要跟随。</p>
<p>终于有一天，葡萄牙国王若昂二世的特使带着满腔怒火站在了伊莎贝拉女王面前。</p>
<p>我永远忘不了那天的场景。特使将一卷羊皮纸——那是我们早就签署过的《阿尔卡索瓦什条约》——重重地摔在桌上，咆哮着说我们的行为是“卑劣的小偷行径”。他们不仅扣押了我们所有的走私船，还威胁要彻底切断我们进入亚速尔群岛以南的所有航路。如果不想开战，就必须拿出一个一个天文数字的赔偿表示歉意。</p>
<p>那笔赔偿金，不仅吐光了这两年郑大师的“借鸡生蛋”计划的所有利润，还让国库背上了比格拉纳达战役时更沉重的赤字。</p>
<p>依然是那个大厅，但气氛比两年前更加令人窒息。郑大师闭门不出，推脱身体不好，他家乡的智慧肯定告诉了他此时应该“远离是非之地”。公爵看起来老了十岁，他再也无法用那种审视的目光看我，而是带着一种走投无路的赌徒神情。</p>
<p>“年轻人……你说的那个向西的计划，”公爵的声音沙哑，“还需要多少钱？”</p>
<p>我心中泛起一阵悲凉的快意，这快感与无奈交织，最终合成的是如同深烘焙咖啡一般的苦涩。“回报公爵大人，如果您一年前问我，那我会迅速准备好三艘全新的卡拉威尔帆船，外加八十名精锐水手。”</p>
<p>我停顿了一下，环视着这些面如死灰的贵族们，残酷地揭开了他们无法说出的话：“但现在？我们没钱造新船了，没有时间，没有工匠，没有水手。葡萄牙人封锁了南下的路，我们只能向西。我们当年为了省钱而没有去造的那些能跨越大洋的巨舰，当年形成的赚取已知航道的思维模式，现在成了我们脖子上的绞索。”</p>
<p>“我只能给你们三艘船，”公爵咬着牙，每一个词都是是从自己身上割肉，“圣玛利亚号，还有平塔号和尼尼亚号。这是我们能凑出来的极限了。其它的贸易船都被葡萄牙人扣押了。”</p>
<p>我差点笑出声来。那三艘船？圣玛利亚号是个笨重的货船，又慢又迟钝；另外两艘小得就像大一点的渔船。这就是他们让我去征服未知大洋的全部家当。当有选择时拥抱所谓的借鉴道路，依靠后发和窃取的那点优势。而当被发现时，却想起自己的主心骨一直都是葡萄牙人给的。只能在软弱的烂泥中寻求各种奇迹。</p>
<p>我说不出这些话，最终的情绪只能汇成一句心灰意冷的回应</p>
<p>“是，愿上帝保佑我们”</p>
<p>我踏上了那艘名为“圣玛利亚”的笨重货船。它吱呀作响，像个患了关节炎的老人。手里拿着的是一张过期的、那是根据葡萄牙人二十年前的认知绘制的旧海图，我甚至没有一个精确的罗盘。船没入黑暗的瞬间，我回头望去。圣塔菲的城墙依旧耸立。我们攻破了格拉纳达，却把自己锁死在了另一座更坚固的围城里。那座城里没有星辰大海，只有精明的算计和无尽的跟随。</p>
<p>NCC一下惊醒，上午还有一个教授的论文讲解讲座。赶过去参加时，教授正在使用着科技风的PPT大讲人工智能。“同学们，不要去想怎么从头训练一个基座模型，那是OpenAI和Google的事，那是烧钱的无底洞，是‘未知的风险’，这绝对拿不到科研资金的。”，教授停顿一下，推推眼镜。“我们要做的是<strong>应用层创新</strong>，是<strong>Prompt Engineering</strong>。只要调用他们的API，加上我们自己的UI，我们就能以最低的成本，实现……弯道超车。”。</p>
<p>教室里爆发出快活的笑声，那是心照不宣的、属于聪明人的笑声。</p>
<p>同学们认真做着笔记，同时导员发在群里的“人工智能快论文思维导图”被百次下载。</p>
<p>NCC听着似曾相识的话，看着好似发生在过去的事，思绪却在大西洋上越走越远。远处只留下郑大师和那座圣塔菲的围城，以及一直被困在围城里，等着别人为他们去开辟新航线的贵族们。</p>
]]>
			</content:encoded>
        </item>
        
        <item>
            <title>异梦杂谈（四）风骨插标</title>
            <link>http://localhost:1313/posts/strange_dream_price_of_spine/</link>
            <pubDate>Fri, 28 Nov 2025 21:11:58 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/strange_dream_price_of_spine/</guid>
            <description>&lt;p&gt;崇祯十五年（1642）。市面萧条，银子也越发矜贵。人心浮动，人人都想在将倾的大厦上，为自己寻一根不沉的梁木。&lt;/p&gt;
&lt;p&gt;金陵秦淮河上的“春熙楼”，是我这种苏杭绸缎商必须来的地方。楼外是秦淮河千年不变的幽咽水声，楼内却是名贵龙涎香和劣质酒气混杂的熏人暖风。在这里请一次客，谈成的生意，比在铺子里干熬一个月还多。今夜，我宴请的是江宁县衙的王主簿。特意拣了个临河的雅座，能看见河上摇曳的灯火，与一个新晋权贵订的包厢，也只隔着一扇绘着“踏雪寻梅”的湘妃竹屏风。&lt;/p&gt;
&lt;p&gt;席间，我们都在谈论着各自的光明前景，仿佛只要说得够大声，那些泡影就能变成真的金山银山。隔壁，一个粗豪的嗓门正在高谈阔论，听旁人奉承，才知那是新上任的锦衣卫王千户，本是扬州盐商出身，不知走了谁的路子，竟穿上了飞鱼服。那席上的人们也是一口一个“大人”，谀词如潮。我心下暗笑，原来这世间的人，脱下外袍，内里都是一般模样。&lt;/p&gt;
&lt;p&gt;“小人略通风鉴之术，”我端起酒杯，凑向王主簿，“观大人气宇，上停丰广，印堂红亮，他日登堂拜相，亦未可知啊。” 王主簿听着十分受用，捻着胡须连连摆手，嘴上谦称“岂敢岂敢”，那杯中酒却是一饮而尽，很快便酒酣耳热。&lt;/p&gt;
&lt;p&gt;当小二再次换上新酒时，王主簿大约是觉得光喝酒有些无趣，便提高了嗓门，朝堂下喊道：“把你们这儿的素雪姑娘请来，为我与南老板唱两曲助助兴！”&lt;/p&gt;
&lt;p&gt;不多时，珠帘轻响，一位身着月白素袄的女子款款而来。她便是素雪，怀抱一张七弦琴，身形清瘦，眉眼间虽带着风尘场中惯有的温顺，却藏着一丝清冷，如同书法中的隐隐藏锋，又似繁叶中的节节枝葩。她不似楼里其他姑娘那般浓妆艳抹，只在鬓边簪了一朵小小的白色珠花，竟有几分书卷气。传闻她原是京城东林党被革职的御史之女，琴棋书画无一不通。自来到金陵，便成为了春熙楼的头牌。只是这两年形势不好，春熙楼的客人或纵情享乐点选名妓进春楼，或忧忧戚戚无心娱乐，她一天也难得演奏一曲了。&lt;/p&gt;
&lt;p&gt;她在我与王主簿面前盈盈一拜，柔声道：“见过王大人，南大人。”&lt;/p&gt;
&lt;p&gt;王主簿大约是想在我面前显摆他的“雅”，挥手道：“素雪姑娘，不必多礼。久闻你一曲《潇湘水云》冠绝秦淮，今日便劳你，为我等弹奏一曲如何？”&lt;/p&gt;
&lt;p&gt;《潇湘水云》是古琴名曲，意境高远，最是考验指法与心境。素雪闻言，眼中闪过一丝光亮，仿佛寻得知音。她郑重地将琴置于案上，试了试音，随即素手轻挑，一串清越如玉盘滚珠的琴音便流淌而出。那琴声一起，雅间内方才的油滑俗气仿佛都被洗去了几分，连我的心神，都不由得沉静下来。音声轻柔如潇湘水的水汽，缓缓升腾罩住了九嶷山。&lt;/p&gt;
&lt;p&gt;一段“洞庭烟雨”未完，意境渐入佳境之时，隔壁屏风后，那王千户的粗豪嗓门猛地炸响：
“停停停！弹这劳什子给谁听？寡淡无味，催人瞌睡！”
一声断喝，琴声戛然而止，如一根被硬生生绷断的丝线。&lt;/p&gt;
&lt;p&gt;素雪的指尖僵在琴弦上，我看见她的背脊在那一瞬间挺得笔直，脸上血色尽褪。雅间内霎时一片死寂，连杯箸相击之声也停滞下来。&lt;/p&gt;
&lt;p&gt;王千户似乎极为满意这种效果，他大笑道：“今儿个爷高兴，不想听这些老掉牙的丧气玩意儿！来，给爷唱个时兴的小调《挂枝儿》，唱得好了，爷有重赏！”&lt;/p&gt;
&lt;p&gt;《挂枝儿》是坊间最流行的俚俗小曲，唱词大胆，曲调轻浮，是登徒子们最爱的佐酒之物。让以清雅闻名的素雪去唱这个，无异于当众掌掴。&lt;/p&gt;
&lt;p&gt;我看见素雪低着头，许久没有动作。她那放在琴上的手，指节已然泛白。我甚至能感到她此刻内心的惊涛骇浪。王主簿脸上青一阵白一阵，想说句场面话，却又畏惧那锦衣卫的权势，终究一个字没敢说。&lt;/p&gt;
&lt;p&gt;“怎么了，弹是不弹？”王千户不耐烦地说道，随手把两锭银子扔在地上。那两锭银子砸在地板上，发出沉闷的响声。这个分量不轻，声音如同敲鼓一般敲击着我们的内心。&lt;/p&gt;
&lt;p&gt;就在我以为她会拂袖而去之时，她却缓缓地抬起了头。脸上那份屈辱与挣扎已被收拾得干干净净，取而代之的，是一个近乎完美的、职业化的柔媚笑容。 “是奴家不识趣，扰了千户大人的雅兴。”她轻启朱唇，声音平稳得听不出一丝波澜，“这便为大人唱一曲《挂枝儿》。”&lt;/p&gt;
&lt;p&gt;她将那张朴素的古琴轻轻推到一旁，仿佛推开了另一个自己，然后站起身，连乐器都不要，只用手在桌沿上打着拍子，便依着那轻佻的节奏，婉转吟唱起来。她唱得极好，每一个转音都带着恰到好处的勾人意味，眼神流转，顾盼生姿，竟比这楼里任何一个专唱小调的姑娘都更具风情。&lt;/p&gt;
&lt;p&gt;隔壁的王千户与众人爆发出阵阵喝彩与污言秽语的调笑，赏钱如雨点般扔了过来。素一曲唱罢，素雪敛衽施礼，便缓缓俯下身子一点一点地捡起碎银和铜钱。面对他人的调笑，也只是微微笑一笑说道“大人笑话了”，便俯身继续捡铜钱。&lt;/p&gt;
&lt;p&gt;王主薄干笑几声，试图把笑声融入隔壁桌的那些笑声中。酒盏放在嘴边，最终居然还是没喝下去。&lt;/p&gt;
&lt;p&gt;我却再也听不见那些喧嚣。我的目光，只盯着她那张笑意盎然的脸。这笑脸如同一个庙会上的木头面具，连泪水都藏住了。&lt;/p&gt;
&lt;p&gt;就在那一刻，我想起了自己。
我想起几天前，为了拿到应天府尹的手谕，我将自己珍藏多年的、亡父留下的唯一遗物——一方宋代端砚，献给了那位酷爱书法的张师爷。而张师爷接过砚台，只随意瞥了一眼，便用来压住了他那张写满油腻菜单的纸。我当时脸上，不也正是挂着和素雪此刻一般无二的、谦卑而诚恳的笑容吗？&lt;/p&gt;
&lt;p&gt;她推开古琴，是为了银子。我献上端砚，是为了前途。
原来如此，我们都是一样的。都是在这浊世里，给自己插上了草标，等着人来问价。&lt;/p&gt;
&lt;p&gt;区别只在于，她卖的是琴声中的风雅，而我卖的是心中那点可怜的念想。我们的风骨，就这么被一首《挂枝儿》、一张油腻的菜单给折辱了，玷污了。&lt;/p&gt;
&lt;p&gt;可笑！我竟还妄想着用金钱去购买她的片刻笑颜，去欣赏她的“风骨”！&lt;/p&gt;
&lt;p&gt;这个时代，哪还有什么风骨！圣贤书中所言的风骨，早已被那些满口仁义道德的“圣人”们偷梁换柱，拿去筑成了他们自己的牌坊。留给我们这些在泥潭里打滚的俗人，不过是一具被掏空了的、一文不值的躯壳罢了。&lt;/p&gt;
&lt;p&gt;素雪拾完那些赏钱，对王千户那边道了万福，再也没有朝我们这边看上一眼。&lt;/p&gt;
&lt;p&gt;王员外有些不满，悄声对我说道：“不过就是个风尘女子罢了，只能没一点风骨地弹这种供人取乐的曲子。咱们不管他。”，说罢，将刚刚放在嘴边的酒一口饮尽。&lt;/p&gt;
&lt;p&gt;我端起酒杯，一饮而尽，那酒，却比黄连还要苦。在一杯杯清冽却又苦涩的酒下肚后，我分明看见捡钱的素雪头上插着一支草标，低头看向酒杯，映照出我头上也有一个。细细看时，却只有一个发簪。&lt;/p&gt;
&lt;p&gt;草标随风晃动，意义再明确不过：&lt;strong&gt;此物待售，价高者得&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;NCC猛地蹬了一下腿，醒了。闹钟显示八点。&lt;/p&gt;
&lt;p&gt;晨光熹微，NCC慌忙跑进教学楼，奔赴那堂八点半开始的就业指导课。讲台上，一位学长正作为优秀毕业生代表，慷慨激昂地分享着经验：“……最重要的是，我们要找到一份有尊严的工作，实现我们的人生价值！”台下掌声雷动。&lt;/p&gt;
&lt;p&gt;辅导员满脸笑容地举着手机，在人群里穿梭，抢拍着各种“积极向上”的角度，准备填充公众号的下一篇推文。&lt;/p&gt;
&lt;p&gt;NCC低下头，看着手中那份刚刚打印出来的、还带着余温的简历。&lt;/p&gt;
&lt;p&gt;那上面罗列着NCC的绩点、奖项、刻意美化过的实习经历。为了让它看起来更“值钱”，字斟句酌，极尽谦卑之词，就像一个在酒桌上要把《挂枝儿》唱得千回百转的歌女。&lt;/p&gt;
&lt;p&gt;整个教室，只有NCC，从教室的掌声中听到了那曲消散的潇湘水云，和那一盏奇苦无比的酒。&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<p>崇祯十五年（1642）。市面萧条，银子也越发矜贵。人心浮动，人人都想在将倾的大厦上，为自己寻一根不沉的梁木。</p>
<p>金陵秦淮河上的“春熙楼”，是我这种苏杭绸缎商必须来的地方。楼外是秦淮河千年不变的幽咽水声，楼内却是名贵龙涎香和劣质酒气混杂的熏人暖风。在这里请一次客，谈成的生意，比在铺子里干熬一个月还多。今夜，我宴请的是江宁县衙的王主簿。特意拣了个临河的雅座，能看见河上摇曳的灯火，与一个新晋权贵订的包厢，也只隔着一扇绘着“踏雪寻梅”的湘妃竹屏风。</p>
<p>席间，我们都在谈论着各自的光明前景，仿佛只要说得够大声，那些泡影就能变成真的金山银山。隔壁，一个粗豪的嗓门正在高谈阔论，听旁人奉承，才知那是新上任的锦衣卫王千户，本是扬州盐商出身，不知走了谁的路子，竟穿上了飞鱼服。那席上的人们也是一口一个“大人”，谀词如潮。我心下暗笑，原来这世间的人，脱下外袍，内里都是一般模样。</p>
<p>“小人略通风鉴之术，”我端起酒杯，凑向王主簿，“观大人气宇，上停丰广，印堂红亮，他日登堂拜相，亦未可知啊。” 王主簿听着十分受用，捻着胡须连连摆手，嘴上谦称“岂敢岂敢”，那杯中酒却是一饮而尽，很快便酒酣耳热。</p>
<p>当小二再次换上新酒时，王主簿大约是觉得光喝酒有些无趣，便提高了嗓门，朝堂下喊道：“把你们这儿的素雪姑娘请来，为我与南老板唱两曲助助兴！”</p>
<p>不多时，珠帘轻响，一位身着月白素袄的女子款款而来。她便是素雪，怀抱一张七弦琴，身形清瘦，眉眼间虽带着风尘场中惯有的温顺，却藏着一丝清冷，如同书法中的隐隐藏锋，又似繁叶中的节节枝葩。她不似楼里其他姑娘那般浓妆艳抹，只在鬓边簪了一朵小小的白色珠花，竟有几分书卷气。传闻她原是京城东林党被革职的御史之女，琴棋书画无一不通。自来到金陵，便成为了春熙楼的头牌。只是这两年形势不好，春熙楼的客人或纵情享乐点选名妓进春楼，或忧忧戚戚无心娱乐，她一天也难得演奏一曲了。</p>
<p>她在我与王主簿面前盈盈一拜，柔声道：“见过王大人，南大人。”</p>
<p>王主簿大约是想在我面前显摆他的“雅”，挥手道：“素雪姑娘，不必多礼。久闻你一曲《潇湘水云》冠绝秦淮，今日便劳你，为我等弹奏一曲如何？”</p>
<p>《潇湘水云》是古琴名曲，意境高远，最是考验指法与心境。素雪闻言，眼中闪过一丝光亮，仿佛寻得知音。她郑重地将琴置于案上，试了试音，随即素手轻挑，一串清越如玉盘滚珠的琴音便流淌而出。那琴声一起，雅间内方才的油滑俗气仿佛都被洗去了几分，连我的心神，都不由得沉静下来。音声轻柔如潇湘水的水汽，缓缓升腾罩住了九嶷山。</p>
<p>一段“洞庭烟雨”未完，意境渐入佳境之时，隔壁屏风后，那王千户的粗豪嗓门猛地炸响：
“停停停！弹这劳什子给谁听？寡淡无味，催人瞌睡！”
一声断喝，琴声戛然而止，如一根被硬生生绷断的丝线。</p>
<p>素雪的指尖僵在琴弦上，我看见她的背脊在那一瞬间挺得笔直，脸上血色尽褪。雅间内霎时一片死寂，连杯箸相击之声也停滞下来。</p>
<p>王千户似乎极为满意这种效果，他大笑道：“今儿个爷高兴，不想听这些老掉牙的丧气玩意儿！来，给爷唱个时兴的小调《挂枝儿》，唱得好了，爷有重赏！”</p>
<p>《挂枝儿》是坊间最流行的俚俗小曲，唱词大胆，曲调轻浮，是登徒子们最爱的佐酒之物。让以清雅闻名的素雪去唱这个，无异于当众掌掴。</p>
<p>我看见素雪低着头，许久没有动作。她那放在琴上的手，指节已然泛白。我甚至能感到她此刻内心的惊涛骇浪。王主簿脸上青一阵白一阵，想说句场面话，却又畏惧那锦衣卫的权势，终究一个字没敢说。</p>
<p>“怎么了，弹是不弹？”王千户不耐烦地说道，随手把两锭银子扔在地上。那两锭银子砸在地板上，发出沉闷的响声。这个分量不轻，声音如同敲鼓一般敲击着我们的内心。</p>
<p>就在我以为她会拂袖而去之时，她却缓缓地抬起了头。脸上那份屈辱与挣扎已被收拾得干干净净，取而代之的，是一个近乎完美的、职业化的柔媚笑容。 “是奴家不识趣，扰了千户大人的雅兴。”她轻启朱唇，声音平稳得听不出一丝波澜，“这便为大人唱一曲《挂枝儿》。”</p>
<p>她将那张朴素的古琴轻轻推到一旁，仿佛推开了另一个自己，然后站起身，连乐器都不要，只用手在桌沿上打着拍子，便依着那轻佻的节奏，婉转吟唱起来。她唱得极好，每一个转音都带着恰到好处的勾人意味，眼神流转，顾盼生姿，竟比这楼里任何一个专唱小调的姑娘都更具风情。</p>
<p>隔壁的王千户与众人爆发出阵阵喝彩与污言秽语的调笑，赏钱如雨点般扔了过来。素一曲唱罢，素雪敛衽施礼，便缓缓俯下身子一点一点地捡起碎银和铜钱。面对他人的调笑，也只是微微笑一笑说道“大人笑话了”，便俯身继续捡铜钱。</p>
<p>王主薄干笑几声，试图把笑声融入隔壁桌的那些笑声中。酒盏放在嘴边，最终居然还是没喝下去。</p>
<p>我却再也听不见那些喧嚣。我的目光，只盯着她那张笑意盎然的脸。这笑脸如同一个庙会上的木头面具，连泪水都藏住了。</p>
<p>就在那一刻，我想起了自己。
我想起几天前，为了拿到应天府尹的手谕，我将自己珍藏多年的、亡父留下的唯一遗物——一方宋代端砚，献给了那位酷爱书法的张师爷。而张师爷接过砚台，只随意瞥了一眼，便用来压住了他那张写满油腻菜单的纸。我当时脸上，不也正是挂着和素雪此刻一般无二的、谦卑而诚恳的笑容吗？</p>
<p>她推开古琴，是为了银子。我献上端砚，是为了前途。
原来如此，我们都是一样的。都是在这浊世里，给自己插上了草标，等着人来问价。</p>
<p>区别只在于，她卖的是琴声中的风雅，而我卖的是心中那点可怜的念想。我们的风骨，就这么被一首《挂枝儿》、一张油腻的菜单给折辱了，玷污了。</p>
<p>可笑！我竟还妄想着用金钱去购买她的片刻笑颜，去欣赏她的“风骨”！</p>
<p>这个时代，哪还有什么风骨！圣贤书中所言的风骨，早已被那些满口仁义道德的“圣人”们偷梁换柱，拿去筑成了他们自己的牌坊。留给我们这些在泥潭里打滚的俗人，不过是一具被掏空了的、一文不值的躯壳罢了。</p>
<p>素雪拾完那些赏钱，对王千户那边道了万福，再也没有朝我们这边看上一眼。</p>
<p>王员外有些不满，悄声对我说道：“不过就是个风尘女子罢了，只能没一点风骨地弹这种供人取乐的曲子。咱们不管他。”，说罢，将刚刚放在嘴边的酒一口饮尽。</p>
<p>我端起酒杯，一饮而尽，那酒，却比黄连还要苦。在一杯杯清冽却又苦涩的酒下肚后，我分明看见捡钱的素雪头上插着一支草标，低头看向酒杯，映照出我头上也有一个。细细看时，却只有一个发簪。</p>
<p>草标随风晃动，意义再明确不过：<strong>此物待售，价高者得</strong>。</p>
<p>NCC猛地蹬了一下腿，醒了。闹钟显示八点。</p>
<p>晨光熹微，NCC慌忙跑进教学楼，奔赴那堂八点半开始的就业指导课。讲台上，一位学长正作为优秀毕业生代表，慷慨激昂地分享着经验：“……最重要的是，我们要找到一份有尊严的工作，实现我们的人生价值！”台下掌声雷动。</p>
<p>辅导员满脸笑容地举着手机，在人群里穿梭，抢拍着各种“积极向上”的角度，准备填充公众号的下一篇推文。</p>
<p>NCC低下头，看着手中那份刚刚打印出来的、还带着余温的简历。</p>
<p>那上面罗列着NCC的绩点、奖项、刻意美化过的实习经历。为了让它看起来更“值钱”，字斟句酌，极尽谦卑之词，就像一个在酒桌上要把《挂枝儿》唱得千回百转的歌女。</p>
<p>整个教室，只有NCC，从教室的掌声中听到了那曲消散的潇湘水云，和那一盏奇苦无比的酒。</p>
]]>
			</content:encoded>
        </item>
        
        <item>
            <title>异梦杂谈（一）金与尘</title>
            <link>http://localhost:1313/posts/strange_dream_gold_and_dust/</link>
            <pubDate>Fri, 28 Nov 2025 10:08:10 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/strange_dream_gold_and_dust/</guid>
            <description>&lt;p&gt;我是皇帝。夜已深，一位老臣坐在我对面。&lt;/p&gt;
&lt;p&gt;我优雅地扬起云纹广袖，轻轻拂去金线坐垫上并不存在的微尘。这动作我练了千百遍，每一寸都在极力模仿那些世家门阀的贵胄风范。而对面的大臣，腰背微佝，满脸挥之不去的疲惫与失望。他无声地落座，姿态中那股子浑然天成的端方，让我心底蓦地一沉。朕的优雅像极了涂脂抹粉的优伶，透着心虚的脂粉气。&lt;/p&gt;
&lt;p&gt;在那一刻，我仿佛又变成了那个拼命往身上涂脂粉的泥腿子，而他，才是一个真正拥有脊梁的君子。&lt;/p&gt;
&lt;p&gt;“陛下，”他开口了，声音像被砂砾磨过，“当年臣与陛下在田埂里刨食，苦于苛捐杂税，又逢易子而食的灾年，这才提着脑袋揭竿而起。如今您龙登大宝，这些过往……您还记得吗？”&lt;/p&gt;
&lt;p&gt;我不耐烦地皱眉。往事如附骨之疽，只一瞬，便让我周身泛起那股熟悉的酸腐味。初定京城时，我常在深夜惊醒，总觉得这满殿的荣华富贵不过是掌中沙、镜中花。为了驱散这种卑贱的恐惧，我开始疯狂地修筑宫室，用威严的朝服包裹自己，刻意将那个“穷小子”谋杀在记忆里。我心中竟为这样短短一句话而隐隐恼怒，他此刻旧事重提，不是叙旧，是在揭我的皮。&lt;/p&gt;
&lt;p&gt;我喉间逸出一声冷哼，不置可否。&lt;/p&gt;
&lt;p&gt;大臣似乎早已料到，仍执拗地说道：“陛下曾言，必行尧舜之道，解民倒悬。可今日加征的‘修宫税’，臣恐……非社稷之福，亦非陛下之初心。”&lt;/p&gt;
&lt;p&gt;我将一直盯着殿中铜兽炭盆的目光，缓缓移向他的脸。炭火正旺，那是用无数银霜炭堆起来的暖意。&lt;/p&gt;
&lt;p&gt;“朕是在替天下人立威。”我慢条斯理地打断他，语气里没有愤怒，只有一种高高在上的悲悯，“爱卿，你只看见百姓苦，却不懂‘体面’二字重若千钧。若朕住茅屋，穿布衣，四夷蛮邦会如何看我大国？朕的琼楼玉宇，不仅是朕的享受，更是这万里江山的脸面。朕是在替万民受这份富贵之累，他们出点钱粮供养国家的尊严，难道不该感恩吗？”&lt;/p&gt;
&lt;p&gt;大臣怔住了，显然没料到我会如此理直气壮。&lt;/p&gt;
&lt;p&gt;“舟所以比人君……”他思考良久，试图搬出圣贤书把我这番话向“昏君”这个词上靠，但是又尽量无法太明显。&lt;/p&gt;
&lt;p&gt;“水能载舟，亦能覆舟。朕知道。”我截断了他的话，嘴角勾起一抹玩味的笑，“爱卿啊，你读书读傻了。朕游北方时，看见那腹中无半点墨水的驯师都懂养鹰的道理。鹰若喂得太饱，便不会去抓兔子，甚至会啄主人的眼；只有让它们半饥半饱，始终盯着那一点悬在空中的肉屑，它们才会为了那一口吃的，拼命为主搏杀。”&lt;/p&gt;
&lt;p&gt;我看着他逐渐苍白的脸，心中涌起一股操纵生灵的快感，继续说道：“百姓亦如鹰犬。只要让他们将将吃饱，不致饿死，他们便会感激涕零，跪谢皇恩。若是让他们太富足，便会生出许多不该有的妄念。朕是在帮他们修身养性，免得他们生出乱心，丢了性命。这，才是最大的慈悲。”&lt;/p&gt;
&lt;p&gt;大臣僵立着，眼中最后一丝光亮熄灭了。他看着我，像看着一个陌生的怪物，多年前在漏水屋檐下同穿破烂同食一饼的情义，在今天早已蒙上一层尘，此刻已彻底蒙了尘。那层灰积得太厚，早已让人分不清底下盖着的，究竟是赤诚的足金，还是冰冷的废铁。我也看着他，感受着这厚重的尘，心中泛起一阵悲哀，但是又回避着，不敢让它从我的目光中透露出来。&lt;/p&gt;
&lt;p&gt;“至于你说的那些圣贤道理，”我站起身，这个高度让我更有一些立于百姓之上的安心感，但我仍然不想直视大臣，“不过是书生们自我感动的梦呓。历史应是由朕这样的人书写的。百年之后，太庙里会有朕的牌位，史官的笔下，朕必然是中兴之主，是降下甘霖的圣君。至于那些泥地里的呻吟？呵，风一吹，就散了，谁会记得？朕是黄金，它们是尘土，这难道不是显而易见的吗？”&lt;/p&gt;
&lt;p&gt;大臣的身影仿佛被抽空了骨架，他深深地低下头，久久，久久，再说不出一句话。&lt;/p&gt;
&lt;p&gt;夜晚金碧辉煌的大殿中，大臣落寞地告退，留下的是一位更落寞的君王，摇动的火光暗示着这黄金大殿的虚妄，也暗示着某位心中的空虚。&lt;/p&gt;
&lt;p&gt;……&lt;/p&gt;
&lt;p&gt;梦醒了。&lt;/p&gt;
&lt;p&gt;阳光透过窗帘的缝隙，刺入昏暗的房间。光柱中，无数细小的尘埃在盲目地上下翻飞，在那一小方天地里撞得头破血流。但是谁会管它们呢？&lt;/p&gt;
&lt;p&gt;肚子发出了一声长长的鸣叫。胃袋里空空荡荡，那种烧灼的饥饿感让我有些手脚发软。最近起床都这么饿，许是昨晚为了省那加班餐补，又没吃晚饭。我下意识摸过手机，让屏幕的光照在脸上，尝试在这个破烂出租屋中找一些能输入干劲的多巴胺来源。&lt;/p&gt;
&lt;p&gt;手指机械地滑动，一段短视频跳了出来：画面里是盛大的国宴，红毯铺地，金杯高举，激昂的乐声几乎要震破手机那劣质的扬声器。我盯着那屏幕，喉结上下滚动了一下，似乎咽下了一口并不存在的唾沫。真气派啊，看着就让人……莫名地觉得挺直了腰杆。&lt;/p&gt;
&lt;p&gt;评论区里，有人发了一句不合时宜的牢骚，抱怨着什么民生多艰。那行字孤零零地夹在一片赞歌中间，显得格外刺眼。我的拇指悬停在那条评论上方，原本因饥饿而发软的手指突然紧绷，像是被某种无形的力量瞬间注入了斗志。我飞快地敲击着屏幕，指尖在玻璃上甚至戳出了“笃笃”的声响，删了又改，直到那是几行字看起来足够尖锐、足够有力，足以将那个发出杂音的人驳斥得体无完肤。那人收到之后必然破防恼怒，上蹿下跳。&lt;/p&gt;
&lt;p&gt;点击发送，同时选择举报，理由填选了“造谣引战”，看着那个转圈的符号消失，我的呼吸终于顺畅了。&lt;/p&gt;
&lt;p&gt;那一刻，肚子似乎也不叫了。那种空虚的饥饿感，竟被这点赛博搏杀后的快意填得满满当当，仿佛刚刚吞下了一块肥美的生肉。“果然有些人就是欠骂。”，我说了一句，但是有些干涩的嘴让说话比较难受。&lt;/p&gt;
&lt;p&gt;“看来是起猛了，再睡一会”我嘟囔了一句，随手关掉屏幕。屋子重新陷入灰暗，只有那束光里的尘埃还在不知疲倦地舞动。&lt;/p&gt;
&lt;p&gt;我翻了个身，拉起被子蒙住头，在那片看似令人心安的昏暗里，沉沉睡去。&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<p>我是皇帝。夜已深，一位老臣坐在我对面。</p>
<p>我优雅地扬起云纹广袖，轻轻拂去金线坐垫上并不存在的微尘。这动作我练了千百遍，每一寸都在极力模仿那些世家门阀的贵胄风范。而对面的大臣，腰背微佝，满脸挥之不去的疲惫与失望。他无声地落座，姿态中那股子浑然天成的端方，让我心底蓦地一沉。朕的优雅像极了涂脂抹粉的优伶，透着心虚的脂粉气。</p>
<p>在那一刻，我仿佛又变成了那个拼命往身上涂脂粉的泥腿子，而他，才是一个真正拥有脊梁的君子。</p>
<p>“陛下，”他开口了，声音像被砂砾磨过，“当年臣与陛下在田埂里刨食，苦于苛捐杂税，又逢易子而食的灾年，这才提着脑袋揭竿而起。如今您龙登大宝，这些过往……您还记得吗？”</p>
<p>我不耐烦地皱眉。往事如附骨之疽，只一瞬，便让我周身泛起那股熟悉的酸腐味。初定京城时，我常在深夜惊醒，总觉得这满殿的荣华富贵不过是掌中沙、镜中花。为了驱散这种卑贱的恐惧，我开始疯狂地修筑宫室，用威严的朝服包裹自己，刻意将那个“穷小子”谋杀在记忆里。我心中竟为这样短短一句话而隐隐恼怒，他此刻旧事重提，不是叙旧，是在揭我的皮。</p>
<p>我喉间逸出一声冷哼，不置可否。</p>
<p>大臣似乎早已料到，仍执拗地说道：“陛下曾言，必行尧舜之道，解民倒悬。可今日加征的‘修宫税’，臣恐……非社稷之福，亦非陛下之初心。”</p>
<p>我将一直盯着殿中铜兽炭盆的目光，缓缓移向他的脸。炭火正旺，那是用无数银霜炭堆起来的暖意。</p>
<p>“朕是在替天下人立威。”我慢条斯理地打断他，语气里没有愤怒，只有一种高高在上的悲悯，“爱卿，你只看见百姓苦，却不懂‘体面’二字重若千钧。若朕住茅屋，穿布衣，四夷蛮邦会如何看我大国？朕的琼楼玉宇，不仅是朕的享受，更是这万里江山的脸面。朕是在替万民受这份富贵之累，他们出点钱粮供养国家的尊严，难道不该感恩吗？”</p>
<p>大臣怔住了，显然没料到我会如此理直气壮。</p>
<p>“舟所以比人君……”他思考良久，试图搬出圣贤书把我这番话向“昏君”这个词上靠，但是又尽量无法太明显。</p>
<p>“水能载舟，亦能覆舟。朕知道。”我截断了他的话，嘴角勾起一抹玩味的笑，“爱卿啊，你读书读傻了。朕游北方时，看见那腹中无半点墨水的驯师都懂养鹰的道理。鹰若喂得太饱，便不会去抓兔子，甚至会啄主人的眼；只有让它们半饥半饱，始终盯着那一点悬在空中的肉屑，它们才会为了那一口吃的，拼命为主搏杀。”</p>
<p>我看着他逐渐苍白的脸，心中涌起一股操纵生灵的快感，继续说道：“百姓亦如鹰犬。只要让他们将将吃饱，不致饿死，他们便会感激涕零，跪谢皇恩。若是让他们太富足，便会生出许多不该有的妄念。朕是在帮他们修身养性，免得他们生出乱心，丢了性命。这，才是最大的慈悲。”</p>
<p>大臣僵立着，眼中最后一丝光亮熄灭了。他看着我，像看着一个陌生的怪物，多年前在漏水屋檐下同穿破烂同食一饼的情义，在今天早已蒙上一层尘，此刻已彻底蒙了尘。那层灰积得太厚，早已让人分不清底下盖着的，究竟是赤诚的足金，还是冰冷的废铁。我也看着他，感受着这厚重的尘，心中泛起一阵悲哀，但是又回避着，不敢让它从我的目光中透露出来。</p>
<p>“至于你说的那些圣贤道理，”我站起身，这个高度让我更有一些立于百姓之上的安心感，但我仍然不想直视大臣，“不过是书生们自我感动的梦呓。历史应是由朕这样的人书写的。百年之后，太庙里会有朕的牌位，史官的笔下，朕必然是中兴之主，是降下甘霖的圣君。至于那些泥地里的呻吟？呵，风一吹，就散了，谁会记得？朕是黄金，它们是尘土，这难道不是显而易见的吗？”</p>
<p>大臣的身影仿佛被抽空了骨架，他深深地低下头，久久，久久，再说不出一句话。</p>
<p>夜晚金碧辉煌的大殿中，大臣落寞地告退，留下的是一位更落寞的君王，摇动的火光暗示着这黄金大殿的虚妄，也暗示着某位心中的空虚。</p>
<p>……</p>
<p>梦醒了。</p>
<p>阳光透过窗帘的缝隙，刺入昏暗的房间。光柱中，无数细小的尘埃在盲目地上下翻飞，在那一小方天地里撞得头破血流。但是谁会管它们呢？</p>
<p>肚子发出了一声长长的鸣叫。胃袋里空空荡荡，那种烧灼的饥饿感让我有些手脚发软。最近起床都这么饿，许是昨晚为了省那加班餐补，又没吃晚饭。我下意识摸过手机，让屏幕的光照在脸上，尝试在这个破烂出租屋中找一些能输入干劲的多巴胺来源。</p>
<p>手指机械地滑动，一段短视频跳了出来：画面里是盛大的国宴，红毯铺地，金杯高举，激昂的乐声几乎要震破手机那劣质的扬声器。我盯着那屏幕，喉结上下滚动了一下，似乎咽下了一口并不存在的唾沫。真气派啊，看着就让人……莫名地觉得挺直了腰杆。</p>
<p>评论区里，有人发了一句不合时宜的牢骚，抱怨着什么民生多艰。那行字孤零零地夹在一片赞歌中间，显得格外刺眼。我的拇指悬停在那条评论上方，原本因饥饿而发软的手指突然紧绷，像是被某种无形的力量瞬间注入了斗志。我飞快地敲击着屏幕，指尖在玻璃上甚至戳出了“笃笃”的声响，删了又改，直到那是几行字看起来足够尖锐、足够有力，足以将那个发出杂音的人驳斥得体无完肤。那人收到之后必然破防恼怒，上蹿下跳。</p>
<p>点击发送，同时选择举报，理由填选了“造谣引战”，看着那个转圈的符号消失，我的呼吸终于顺畅了。</p>
<p>那一刻，肚子似乎也不叫了。那种空虚的饥饿感，竟被这点赛博搏杀后的快意填得满满当当，仿佛刚刚吞下了一块肥美的生肉。“果然有些人就是欠骂。”，我说了一句，但是有些干涩的嘴让说话比较难受。</p>
<p>“看来是起猛了，再睡一会”我嘟囔了一句，随手关掉屏幕。屋子重新陷入灰暗，只有那束光里的尘埃还在不知疲倦地舞动。</p>
<p>我翻了个身，拉起被子蒙住头，在那片看似令人心安的昏暗里，沉沉睡去。</p>
]]>
			</content:encoded>
        </item>
        
        <item>
            <title>hugo部署小记——基于 Hugo &#43; GitHub Actions 的自动化部署实践，与 i18n 踩坑录</title>
            <link>http://localhost:1313/posts/hugo_deploy_diary/</link>
            <pubDate>Thu, 27 Nov 2025 22:38:21 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/hugo_deploy_diary/</guid>
            <description>&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;
&lt;p&gt;NCC换服务器啦！&lt;/p&gt;
&lt;p&gt;NCC最近被阿里云发邮件让补多年前忘记申请的公网安备，但是多次申请总是没通过（后来才知道填错管辖区了）。正好又对阿里云200M锐驰服务器的经常卡顿有点不满（因为只是满速为200Mbps，完全没有保底速度，而且晚高峰延迟不行），于是找到了Hostdare的美国服务器CN2 GIA线路，一个月要12刀，但是不像其它海外服务器一样卡顿，国内直连带宽也不错。&lt;/p&gt;
&lt;p&gt;备份旧服务器时看到原先的博客是Wordpress，每次加载都得转圈，背后的PHP一直在动态加载界面放在前端，特别是进入管理页面很卡。于是想起了Hexo，Hugo等静态博客，不仅方便CDN托管，速度应该也会快上不少。而且同时舍弃掉WordPress里面一堆用不到的奇怪功能也更清爽。&lt;/p&gt;
&lt;p&gt;NCC 想起了 &lt;strong&gt;Hugo&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果说 WordPress 是个现炒现卖的厨师，那 Hugo 就是个食品加工厂。它把所有文章一次性编译成静态 HTML 预制菜，客人来了，Nginx 直接端盘子就行。&lt;br&gt;
这种架构，别说现在的云服务器，就算是二十年前的电脑也能跑得飞快，而且配合 CDN 简直是0成本并行接待，速度起飞。&lt;/p&gt;
&lt;h2 id=&#34;hugo初始化&#34;&gt;hugo初始化&lt;/h2&gt;
&lt;p&gt;Hugo 不像 WordPress 需要复杂的环境，它只是一个命令行工具。运行这个指令可以直接得到它需要的文件结构：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hugo new site . --force
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;为了方便后续管理，强烈建议使用 Git 或者你喜欢的版本跟踪器来跟踪整个项目：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git init
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git checkout main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git add .
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;initialize&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git remote add origin https://&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;Change_This_to_Your_Git_Repository_URL&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git push -u origin main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;选择主题&#34;&gt;选择主题&lt;/h2&gt;
&lt;p&gt;Hugo选择主题也是一门学问，严格来说这个主题是一个非常重要的生成模板，而且这个Hugo没有所谓开机自带默认主题。可以自己去 &lt;code&gt;Hugo Theme&lt;/code&gt; 网站选一个看起来喜欢的。
但是这里有个&lt;strong&gt;巨大&lt;/strong&gt;的坑：很多主题是开源社区维护的，质量参差不齐。选主题不能光看颜值，一定要看 &lt;strong&gt;GitHub Star 数&lt;/strong&gt;、&lt;strong&gt;Issues 活跃度&lt;/strong&gt; 以及 &lt;strong&gt;文档&lt;/strong&gt; 是否齐全。否则你可能会遇到各种玄学 Bug，最后只能对着源码发呆。&lt;/p&gt;
&lt;p&gt;NCC 最终看中了 &lt;a href=&#34;https://github.com/rhazdon/hugo-theme-hello-friend-ng&#34;&gt;Hello Friend NG&lt;/a&gt; 这个主题，文档齐全且看起来很清爽。&lt;br&gt;
安装主题推荐使用 Git Submodule（子模块）的方式，这样方便后续更新：&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<h2 id="前言">前言</h2>
<p>NCC换服务器啦！</p>
<p>NCC最近被阿里云发邮件让补多年前忘记申请的公网安备，但是多次申请总是没通过（后来才知道填错管辖区了）。正好又对阿里云200M锐驰服务器的经常卡顿有点不满（因为只是满速为200Mbps，完全没有保底速度，而且晚高峰延迟不行），于是找到了Hostdare的美国服务器CN2 GIA线路，一个月要12刀，但是不像其它海外服务器一样卡顿，国内直连带宽也不错。</p>
<p>备份旧服务器时看到原先的博客是Wordpress，每次加载都得转圈，背后的PHP一直在动态加载界面放在前端，特别是进入管理页面很卡。于是想起了Hexo，Hugo等静态博客，不仅方便CDN托管，速度应该也会快上不少。而且同时舍弃掉WordPress里面一堆用不到的奇怪功能也更清爽。</p>
<p>NCC 想起了 <strong>Hugo</strong></p>
<p>如果说 WordPress 是个现炒现卖的厨师，那 Hugo 就是个食品加工厂。它把所有文章一次性编译成静态 HTML 预制菜，客人来了，Nginx 直接端盘子就行。<br>
这种架构，别说现在的云服务器，就算是二十年前的电脑也能跑得飞快，而且配合 CDN 简直是0成本并行接待，速度起飞。</p>
<h2 id="hugo初始化">hugo初始化</h2>
<p>Hugo 不像 WordPress 需要复杂的环境，它只是一个命令行工具。运行这个指令可以直接得到它需要的文件结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo new site . --force
</span></span></code></pre></div><p>为了方便后续管理，强烈建议使用 Git 或者你喜欢的版本跟踪器来跟踪整个项目：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span>git checkout main
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;initialize&#34;</span>
</span></span><span style="display:flex;"><span>git remote add origin https://<span style="color:#f92672">{</span>Change_This_to_Your_Git_Repository_URL<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>git push -u origin main
</span></span></code></pre></div><h2 id="选择主题">选择主题</h2>
<p>Hugo选择主题也是一门学问，严格来说这个主题是一个非常重要的生成模板，而且这个Hugo没有所谓开机自带默认主题。可以自己去 <code>Hugo Theme</code> 网站选一个看起来喜欢的。
但是这里有个<strong>巨大</strong>的坑：很多主题是开源社区维护的，质量参差不齐。选主题不能光看颜值，一定要看 <strong>GitHub Star 数</strong>、<strong>Issues 活跃度</strong> 以及 <strong>文档</strong> 是否齐全。否则你可能会遇到各种玄学 Bug，最后只能对着源码发呆。</p>
<p>NCC 最终看中了 <a href="https://github.com/rhazdon/hugo-theme-hello-friend-ng">Hello Friend NG</a> 这个主题，文档齐全且看起来很清爽。<br>
安装主题推荐使用 Git Submodule（子模块）的方式，这样方便后续更新：</p>
<p>看中喜欢的主题之后记下它的源码URL，NCC看中了 <code>hello-friend-ng</code> 这个主题，安装主题推荐使用 <strong>Git Submodule</strong> 的方式，而不是直接下载解压，这样方便后续跟随作者更新：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git submodule add https://github.com/rhazdon/hugo-theme-hello-friend-ng themes/hugo-theme-hello-friend-ng
</span></span></code></pre></div><h2 id="配置文件">配置文件</h2>
<p>配置文件居然在选择主题之后！是的，因为hugo的配置文件依赖于你选择的主题（感觉有点不太聪明的组织方式）。
你所需要配置的文件只有<code>hugo.toml</code>这一个，这回指导hugo进行所有任务。</p>
<p><strong>注意</strong>：配置文件里有一个 <code>dateFrom</code> 相关的日期格式，这是一个 Go 语言特有的“魔法数字”。NCC 起初以为要改成当前日期，还在思考怎么这个项目从 2006 年就开始了，结果一改就导致博客前端日期全崩了。后来查阅官方文档才知道，<strong>2006 年 1 月 2 日 15 点 04 分</strong> 是 Go 语言的时间格式化标准，不能乱动。</p>
<p>随后就可以在<code>hugo.toml</code>里面指定 <code>theme = 'hugo-theme-hello-friend-ng'</code> 了。以下是 NCC 踩坑后总结出的 <strong>生产环境可用配置</strong>（解决了后面提到的多语言路由问题）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">baseURL</span> = <span style="color:#e6db74">&#39;https://blog.nancunchild.cn/&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">languageCode</span> = <span style="color:#e6db74">&#39;zh-CN&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#39;NanCunChild的碎碎念&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme</span> = <span style="color:#e6db74">&#39;hugo-theme-hello-friend-ng&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">pagination</span>.<span style="color:#a6e22e">pagerSize</span> = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">defaultContentLanguage</span> = <span style="color:#e6db74">&#39;zh-cn&#39;</span> <span style="color:#75715e"># 加入这个可以让访问中文博客时路径中没有zh-cn，而是将中文作为默认</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">defaultContentLanguageInSubdir</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#不要手欠改日期</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">dateform</span>        = <span style="color:#e6db74">&#34;Jan 02, 2006&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">dateformShort</span>   = <span style="color:#e6db74">&#34;Jan 02&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">dateformNum</span>     = <span style="color:#e6db74">&#34;2006-01-02&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">dateformNumTime</span> = <span style="color:#e6db74">&#34;2006-01-02 15:04&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subtitle</span> = <span style="color:#e6db74">&#34;NCC的碎碎念&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">description</span> = <span style="color:#e6db74">&#34;NanCunChild的个人博客，包含生活，技术和幻想&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">keywords</span> = <span style="color:#e6db74">&#34;homepage, blog, nancunchild, tech&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">images</span> = [<span style="color:#e6db74">&#34;assets/web_icon.ico&#34;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">disableReadOtherPosts</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">enableSharingButtons</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">enableGlobalLanguageMenu</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">defaultTheme</span> = <span style="color:#e6db74">&#34;auto&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">author</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;NanCunChild&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">contact</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">email</span> = <span style="color:#e6db74">&#39;nancunchild@gmail.com&#39;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">languages</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#这里需要是zh-cn，而不是zh短码</span>
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh-cn</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageCode</span> = <span style="color:#e6db74">&#39;zh-CN&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageName</span> = <span style="color:#e6db74">&#39;中文&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#39;NanCunChild的碎碎念&#39;</span>
</span></span><span style="display:flex;"><span>        [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh-cn</span>.<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">subtitle</span> = <span style="color:#e6db74">&#39;生活、技术与幻想&#39;</span>
</span></span><span style="display:flex;"><span>            [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">homeInfoParams</span>]
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Title</span> = <span style="color:#e6db74">&#34;你好 👋&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Content</span> = <span style="color:#e6db74">&#34;欢迎来到NCC的碎碎念&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh-cn</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;about&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;关于我&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/about/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh-cn</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;posts&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;文章&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/posts/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">zh-cn</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;archives&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;归档&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/archives/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageCode</span> = <span style="color:#e6db74">&#39;en-US&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageName</span> = <span style="color:#e6db74">&#39;English&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;NanCunChild&#39;s Blog&#34;</span>
</span></span><span style="display:flex;"><span>        [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>.<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">subtitle</span> = <span style="color:#e6db74">&#39;Tech, Life and Fantasy&#39;</span>
</span></span><span style="display:flex;"><span>            [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">homeInfoParams</span>]
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Title</span> = <span style="color:#e6db74">&#34;Hi there 👋&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Content</span> = <span style="color:#e6db74">&#34;Welcome to NCC&#39;s Blog&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;about&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;About&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/en/about/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;posts&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Posts&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/en/posts/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">en</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;archives&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Archives&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/en/archives/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageCode</span> = <span style="color:#e6db74">&#39;ja-JP&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">languageName</span> = <span style="color:#e6db74">&#39;日本語&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#39;NanCunChildのブログ&#39;</span>
</span></span><span style="display:flex;"><span>        [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>.<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">subtitle</span> = <span style="color:#e6db74">&#39;生活、技術とファンタジー&#39;</span>
</span></span><span style="display:flex;"><span>            [<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">homeInfoParams</span>]
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Title</span> = <span style="color:#e6db74">&#34;こんにちは 👋&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Content</span> = <span style="color:#e6db74">&#34;NCCのブログへようこそ&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;about&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;プロフィール&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/ja/about/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;posts&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;記事一覧&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/ja/posts/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        [[<span style="color:#a6e22e">languages</span>.<span style="color:#a6e22e">ja</span>.<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;archives&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;アーカイブ&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/ja/archives/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">20</span>
</span></span></code></pre></div><p>而且还可以注意一下，如果不准备使用多语言，可以不管<code>[language]</code>标签，直接使用<code>[menu]</code> 标签即可，同时设置 <code>enableGlobalLanguageMenu = false</code> ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">menu</span>]
</span></span><span style="display:flex;"><span>    [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;posts&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;文章&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/posts/&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>    [[<span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">main</span>]]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">identifier</span> = <span style="color:#e6db74">&#34;archives&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;归档&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;/archives/&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">weight</span> = <span style="color:#ae81ff">20</span>
</span></span></code></pre></div><h2 id="自动化上传博客">自动化上传博客</h2>
<p>上传博客有多种方式，平时写博客就只需要一个符合hugo标准的markdown文件，通过hugo编译好之后放在服务器上，你配置的nginx会很听话地照顾这些静态文件。而我们的目标是让这个过程变优雅。</p>
<p>首先，写博客当然在本地，NCC推荐VS Code安装MD扩展、以及Obsidian两款软件来写。使用VSCode可以在任意地方写，然后自己使用喜欢的版本控制软件管理。使用Obsidian的话它会有一个Vault位置用于存放，而且登录账户了似乎可以云存储。两个在管理上都非常不错，在操作习惯和界面上各有千秋。不过NCC总是觉得Obsidian的界面很不错，简单从而不会分心，自带无需配置的快速预览，面对这样的界面更能专注写文章。</p>
<p>第二步，将Markdown格式的博客原文使用hugo编译为网站代码。这一步说法就超多啦！本地下载一个hugo，写完就编译，还能本地查看，满意之后就使用自己喜欢的方式传入服务器，应该是大多数人的选择。不过NCC喜欢更符合工作流的方式，就是希望版本管理和远程同步能一键完成而不是胶水粘合，此时看来使用git是一个非常不错的选择，于是在开始提出两种方案：</p>
<ul>
<li>本地编写，使用git push到服务器上，服务器检测到仓库变动就马上唤起hugo编译部署，一气呵成。</li>
<li>本地编写，使用git push到GitHub，GitHub帮忙编译之后使用某些方法传到服务器上。</li>
</ul>
<p>NCC第一次接触Hugo，误以为编译时间会比较长，可能比较消耗性能，于是选择了把任务交给Github（但是实际上几篇博客编译出来，只有单核的Linux机器编译时间不超过5秒钟），所以NCC做了这个不算非常安全的决定，将一个用户的登录权限交给GitHub，让它自己登录服务器去更新网页。这比让服务器不断轮询GitHub，GitHub还得永久保存编译后文件给它留着的主动方式方便很多，算是使用些微的安全性更换了巨大的便利。
所以目前的情况是这样的：NCC在终端写好博客，使用git上传到GitHub，GitHub上的CI/CD发力编译出成品，然后使用ssh链接到NCC的服务器，使用rsync同步编译文件。</p>
<p>这里是NCC的workflow文件，大家可以抄抄作业：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy Hugo to NCC Server</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">main</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">workflow_dispatch</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">build-and-deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v4</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">submodules</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">fetch-depth</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setup Hugo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">peaceiris/actions-hugo@v2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">hugo-version</span>: <span style="color:#e6db74">&#39;latest&#39;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">extended</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Build</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">hugo --minify</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setup SSH Key</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">shimataro/ssh-key-action@v2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">key</span>: <span style="color:#ae81ff">${{ secrets.SSH_KEY }}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">known_hosts</span>: <span style="color:#e6db74">&#39;just-a-placeholder-so-we-dont-get-errors&#39;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">if_key_exists</span>: <span style="color:#ae81ff">replace</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Add Known Hosts</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">ssh-keyscan -H ${{ secrets.HOST }} &gt;&gt; ~/.ssh/known_hosts</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy with rsync</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          # attention, path problem
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          rsync -avz --delete public/ ${{ secrets.USER }}@${{ secrets.HOST }}:/var/www/ncc_sites/ncc_blog/html</span>
</span></span></code></pre></div><p>接下来记得给GitHub创建一个非特权账户，然后指定SSH密钥之后，将私钥导入进这个项目的SecretVariable里面，它会替换这里面的变量值，同时也防止别人看到。永远记住权限最小原则，只允许GitHub上传用的用户使用这个网站目录，必要时可以使用SELinux安全上下文约束它。</p>
<h2 id="遇到i18n">遇到i18n</h2>
<p>NCC以为一切已经落定，只剩下i18n这朵乌云也是优化配置很快可以解决的时候。i18n和历史遗留问题给NCC迎面一拳。NCC使用了中文，英文，日语三国语言，准备之后给每篇博客都配三语内容，但是发现英文可以索引到正确文章，日语也可以，就只有中文不行，只要访问中文博客和路径，就会变成404，或者回退到英文显示。接下来就是为期2小时的翻源码，找引用，拆开i18n，逐行核对Nginx配置，问Gemini的时间。最终找到一个可疑点，询问Gemini后发现就是问题所在。</p>
<p>i18n中定义的简体中文文件名是 <code>zh-CN.toml</code>，所以不能简单在配置文件中指定 <code>[languageCode = 'zh']</code>，而必须是 <code>[languageCode = 'zh-cn']</code>。因为此外还有 <code>zh-tw</code>, <code>zh-hk</code> 等。在其它国家语言代码都只有两位的时候，这玩意有4位。而且之后写中文博客还需要添加 <code>.zh-cn.md</code> 后缀才行。</p>
<h2 id="目前情况">目前情况</h2>
<p>现在，NCC 的博客完全运行在 Docker 容器中的 Nginx 上。</p>
<ul>
<li><strong>性能</strong>：10 个并发访问时 CPU 占用不足 5%，秒开。</li>
<li><strong>安全</strong>：静态文件天然免疫 SQL 注入和 PHP 漏洞。</li>
<li><strong>体验</strong>：本地 Obsidian 写作 -&gt; Git Push -&gt; 全自动上线。</li>
</ul>
<p>超优雅的哇，而且GitHub Action失败了还会给你发邮件，既能防止配置错误造成博客宕机，还可以第一时间看到部署情况。</p>
]]>
			</content:encoded>
        </item>
        
        <item>
            <title>Hello Hugo</title>
            <link>http://localhost:1313/posts/hello-hugo/</link>
            <pubDate>Thu, 27 Nov 2025 03:50:27 +0800</pubDate>
            
            <guid>http://localhost:1313/posts/hello-hugo/</guid>
            <description>&lt;p&gt;这是NCC第一次使用Hugo编写博客的尝试，再也不用怕有坏人打NCC的WordPress啦！CDN分发也会超方便！&lt;/p&gt;</description>
            <content:encoded>
				<![CDATA[<p>这是NCC第一次使用Hugo编写博客的尝试，再也不用怕有坏人打NCC的WordPress啦！CDN分发也会超方便！</p>
]]>
			</content:encoded>
        </item>
        
    </channel>
</rss>
